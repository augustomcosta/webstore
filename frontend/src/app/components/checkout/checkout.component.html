<div class="checkout">
  <div class="flex items-center align-middle pb-[2rem]">
    <div class="flex justify-center items-center bg-gradient-to-tr
  from-gradientColor-darkAugusteal
  to-gradientColor-augusteal mr-2 min-h-[2rem] max-h-[2rem] min-w-[2rem] max-w-[2rem] rounded-md">
      <i class="fa-solid fa-boxes-stacked text-white"></i>
    </div>
    <h2 class="text-start !m-0">Checkout</h2>
  </div>
    <div class="checkout-container">
        <div class="stepper-container">
            <h1 class="text-teal-800">Mailing Address</h1>
          <form [formGroup]="form" method="get" action="." (ngSubmit)="updateUserAddress()">
            <span id="message"></span>
              <div class="cep !mb-6">
                <label class="block text-teal-900 text-sm font-bold mb-2">
                  CEP
                </label>
                <input class="form-input" id="cep" type="text" placeholder="CEP"
                       name="cep" value="" size="10" maxlength="9" (blur)="onCepBlur($event)" formControlName="cep">
              </div>
            <div class="flex flex-col">
              <div class="flex justify-between items-center gap-3 w-full mb-4">
                <div class="state">
                  <label class="block text-teal-900 text-sm font-bold mb-2">
                    State
                  </label>
                  <input class="form-input" id="state" type="text" placeholder="State"
                         formControlName="state">
                </div>
                <div class="city">
                  <label class="block text-teal-900 text-sm font-bold mb-2">
                    City
                  </label>
                  <input class="form-input" id="city" type="text" placeholder="City"
                         formControlName="city">
                </div>
              </div>
              <div class="neighborhood !mb-6">
                  <label class="block text-teal-900 text-sm font-bold mb-2">
                    Neighborhood
                  </label>
                  <input class="form-input" id="neighborhood" type="text" placeholder="Neighborhood"
                         formControlName="neighborhood">
              </div>
              <div class="flex  items-center gap-3 w-full">
                <div class="street w-[70%]">
                    <label class="block text-teal-900 text-sm font-bold mb-2">
                      Street
                    </label>
                    <input class="form-input" id="street" type="text" placeholder="Street"
                           formControlName="street">
                  </div>
                <div class="number w-[30%]">
                    <label class="block text-teal-900 text-sm font-bold mb-2">
                      Number
                    </label>
                    <input class="form-input" id="number" type="text" placeholder="Number"
                           formControlName="number">
                </div>
              </div>
              <button class="payment-button" type="submit" [disabled]="!form.valid">
                <p>Go to Payment -></p>
              </button>
            </div>
          </form>
        </div>
        <div class="cart-summary">
          <div class="cart-items-container">
          <h1>Cart Summary</h1>
            @for(item of basket?.basketItems; track $index) {
              <div class="cart-item">
                <p>{{ item.quantity }}x {{ item.productName }}</p>
                <p>{{ item.price * item.quantity | currency}}</p>
              </div>
            }
          </div>
          <div class="order-totals">
          @if((basketTotal$ | async); as basketTotal) {
             <div class="subtotal">
               <p>Subtotal:</p>
               <p>{{ basketTotal.subTotal | currency }}</p>
             </div>
            <div class="shipping">
              <p>Shipping:</p>
              <p>{{ basketTotal.shipping | currency }}</p>
            </div>
            <div class="total">
              <p class="!m-0">Total:</p>
              <p class="!m-0">{{ basketTotal.total | currency }}</p>
            </div>
          }
          </div>
        </div>
  </div>
</div>
